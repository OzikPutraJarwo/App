<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vault - Your Secure Digital Vault</title>
  <link rel="icon" type="image/x-icon" href="../favicon.png">
  <link rel="stylesheet" href="./style.css">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js"></script>
</head>

<body>
  <!-- Background -->
  <div class="bg-gradient"></div>
  <div class="bg-mesh"></div>

  <!-- Auth Screen -->
  <div id="authScreen" class="auth-screen">
    <div class="auth-card glass">
      <div class="auth-header">
        <div class="vault-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
        </div>
        <h1>Vault</h1>
        <p>Your Secure Digital Vault</p>
      </div>

      <!-- Loading Section -->
      <div id="loadingSection" class="auth-section">
        <div class="loading-spinner"></div>
        <p style="margin-top: 1rem; color: var(--text-secondary);">Loading your vault...</p>
      </div>

      <!-- API Config Section -->
      <div id="apiConfigSection" class="auth-section hidden">
        <div class="form-group">
          <label>Google API Key</label>
          <input type="text" id="apiKeyInput" placeholder="Enter your API key">
        </div>
        <div class="form-group">
          <label>Google Client ID</label>
          <input type="text" id="clientIdInput" placeholder="Enter your client ID">
        </div>
        <button id="saveConfigBtn" class="btn btn-primary">Save Configuration</button>
        <button id="backFromConfigBtn" class="btn btn-ghost">Back</button>
      </div>

      <!-- Google Auth Section -->
      <div id="googleAuthSection" class="auth-section hidden">
        <button id="googleSignIn" class="btn btn-google">
          <svg viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC04" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.66l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Continue with Google
        </button>
        <button id="configToggleBtn" class="btn btn-ghost">Configure API</button>
      </div>

      <!-- Master Password Section -->
      <div id="passwordSection" class="auth-section hidden">
        <div class="success-badge">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
          <span>Authenticated</span>
        </div>
        <div class="form-group">
          <label>Master Password</label>
          <input type="password" id="masterPassword" placeholder="Enter your master password" 
                 onkeydown="if(event.key==='Enter') handleUnlock()">
        </div>
        <button id="unlockBtn" class="btn btn-primary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          Unlock Vault
        </button>
      </div>
    </div>
  </div>

  <!-- Main App -->
  <div id="mainApp" class="main-app hidden">
    <!-- Mobile Header -->
    <header class="mobile-header glass">
      <button class="menu-toggle" id="menuToggle">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
      </button>
      <div class="mobile-logo">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <span>Vault</span>
      </div>
      <div class="sync-indicator" id="syncStatusMobile">
        <div class="sync-dot"></div>
      </div>
    </header>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar glass" id="sidebar">
      <div class="sidebar-header">
        <div class="vault-logo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <span>Vault</span>
        </div>
        <div class="sync-indicator" id="syncStatus">
          <div class="sync-dot"></div>
          <span>Synced</span>
        </div>
      </div>

      <div class="sidebar-nav">
        <button class="nav-btn active" id="dashboardNav">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
          <span>Dashboard</span>
        </button>
      </div>

      <div class="sidebar-sections">
        <div class="section-header">
          <span>Collections</span>
          <button class="icon-btn" id="newCollectionBtn" title="New Collection">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
        </div>
        <div id="collectionsList" class="collections-list"></div>
      </div>

      <div class="sidebar-footer">
        <button class="btn-logout" id="logoutBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          <span>Logout</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Dashboard View -->
      <div id="dashboardView" class="content-view">
        <div class="content-header">
          <div>
            <h1>Dashboard</h1>
            <p>Overview of your vault</p>
          </div>
        </div>
        <div id="dashboardGrid" class="dashboard-grid"></div>
      </div>

      <!-- Collection View -->
      <div id="collectionView" class="content-view hidden">
        <div class="content-header">
          <div>
            <h1 id="collectionTitle">Collection</h1>
            <p id="collectionDescription">Items in this collection</p>
          </div>
          <div class="header-actions">
            <button class="icon-btn" id="deleteCollectionBtn" title="Delete Collection">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              </svg>
            </button>
            <button class="icon-btn" id="editCollectionBtn" title="Edit Collection">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
            </button>
            <button class="btn btn-primary" id="newItemBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              New Item
            </button>
          </div>
        </div>
        <div id="itemsGrid" class="items-grid"></div>
      </div>
    </main>
  </div>

  <!-- Modal: Collection -->
  <div id="collectionModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content glass">
      <div class="modal-header">
        <h2 id="collectionModalTitle">New Collection</h2>
        <button class="icon-btn modal-close">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="collectionId">
        <div class="form-group">
          <label>Category</label>
          <div class="category-input-wrapper">
            <input type="text" id="collectionCategory" list="categoryList" placeholder="e.g., Personal, Work, Finance">
            <datalist id="categoryList"></datalist>
          </div>
        </div>
        <div class="form-group">
          <label>Collection Name</label>
          <input type="text" id="collectionName" placeholder="e.g., Accounts, Cards, Documents">
        </div>
        <div class="form-group">
          <label>Icon</label>
          <div class="icon-picker">
            <input type="text" id="collectionIcon" placeholder="Emoji like ðŸ“ or ðŸ”’" style="flex: 1;">
            <label class="file-upload-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              <input type="file" id="collectionIconInput" accept="image/*" hidden>
            </label>
          </div>
        </div>
        <div class="form-group">
          <label>Color</label>
          <div class="color-picker">
            <label class="color-option transparent-option" title="Transparent">
              <input type="radio" name="collectionColorRadio" value="transparent">
              <span class="checkered"></span>
            </label>
            <input type="color" id="collectionColor" value="#3b82f6">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" id="cancelCollectionBtn">Cancel</button>
        <button class="btn btn-primary" id="saveCollectionBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Modal: Item -->
  <div id="itemModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content glass modal-large">
      <div class="modal-header">
        <h2 id="itemModalTitle">New Item</h2>
        <button class="icon-btn modal-close">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="itemId">
        <div class="form-group">
          <label>Item Title</label>
          <input type="text" id="itemName" placeholder="e.g., Gmail Account, Credit Card">
        </div>
        <div class="fields-section">
          <div class="section-header">
            <label>Fields</label>
            <button class="btn btn-sm" id="addFieldBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Add Field
            </button>
          </div>
          <div id="fieldsContainer" class="fields-container"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" id="cancelItemBtn">Cancel</button>
        <button class="btn btn-primary" id="saveItemBtn">Save Item</button>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast glass"></div>

  <script src="./script.js"></script>
</body>

</html>
